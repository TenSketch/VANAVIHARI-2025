<app-layout>
  <div class="main">
    <app-loader *ngIf="showLoader"></app-loader>
    <section class="settings my-5 py-5">
      <div class="container mt-5">
        <h2 class="text-center mb-4">Account Settings</h2>

        <div class="row justify-content-around align-items-center">
          <div class="col-md-4">
            <img src="assets/img/personal.jpg" alt="personal-details">
          </div>
          <div class="col-md-4 mt-4 mt-md-0">
            <h3 class="mb-3 text-center">Personal Details</h3>
            <form [formGroup]="form">
              <div class="mt-3 d-flex justify-content-between align-items-end" *ngIf="editingField !== 'full_name'">
                <mat-form-field class="read-only"  appearance="outline">
                  <mat-label>Name</mat-label>
                  <input readonly matInput formControlName="full_name" type="text">
                </mat-form-field>              </div>
              <div class="mt-3" *ngIf="editingField === 'full_name'">
                <mat-form-field appearance="outline">
                  <mat-label>Name</mat-label>
                  <input matInput formControlName="full_name" type="text">
                </mat-form-field>
                <!-- <div class="mt-3 text-start">
                  <button mat-button class="btn btn-danger" (click)="cancelEditing('full_name')">Cancel</button>
                  <button mat-button class="btn btn-success" (click)="saveChanges('full_name')">Save</button>
                </div> -->
              </div>
          
              
              <div class="mt-3 d-flex justify-content-between align-items-end" *ngIf="editingField !== 'mobile_number'">
                <mat-form-field appearance="outline">
                  <mat-label>Mobile No</mat-label>
                  <input  matInput formControlName="mobile_number" type="tel" [readonly]="!isFieldEditable.mobile_number">
                  <button mat-icon-button matSuffix (click)="editField('mobile_number')">
                    <mat-icon class="fa fa-pencil-alt"></mat-icon>
                  </button>
                </mat-form-field>              </div>
              <div class="mt-4" *ngIf="editingField === 'mobile_number'">
                <mat-form-field appearance="outline">
                  <mat-label>Mobile No</mat-label>
                  <input  formControlName="mobile_number" type="tel">
                  
                </mat-form-field>
                <!-- <div class="mt-3 text-start">
                  <button mat-button class="btn btn-danger" (click)="cancelEditing('mobile_number')">Cancel</button>
                  <button mat-button class="btn btn-success" (click)="saveChanges('mobile_number')">Save</button>
                </div> -->
              </div>
          
              
              <div class="mt-1 d-flex justify-content-between align-items-end" *ngIf="editingField !== 'email'">
                <mat-form-field class="read-only"   appearance="outline">
                  <mat-label >Email</mat-label>
                  <input readonly matInput formControlName="email" type="email">
                </mat-form-field>                              
              </div>
              <div class="mt-3" *ngIf="editingField === 'email'">
                <mat-form-field appearance="outline">
                  <mat-label>Email</mat-label>
                  <input matInput formControlName="email" type="email">
                </mat-form-field>
                <!-- <div class="mt-3 text-start">
                  <button mat-button class="btn btn-danger" (click)="cancelEditing('email')">Cancel</button>
                  <button mat-button class="btn btn-success" (click)="saveChanges('email')">Save</button>
                </div> -->
              </div>
          
              <mat-form-field   [ngClass]="{'read-only': form.get('dob')?.value}"
              appearance="outline" class="mt-3">
                <mat-label>DOB</mat-label>
                <input (click)="dobPicker.open()" [disabled]="form.get('dob')?.value" matInput [matDatepicker]="dobPicker" formControlName="dob" placeholder="Choose a date">
                <mat-datepicker-toggle matSuffix [for]="dobPicker"></mat-datepicker-toggle>
                <mat-datepicker #dobPicker></mat-datepicker>
              </mat-form-field>
              
              
              <mat-form-field appearance="outline" class="mt-3">
                <mat-label>Nationality</mat-label>
                <input matInput type="text" required formControlName="nationality" [readonly]="!isFieldEditable.nationality">
                <button mat-icon-button matSuffix (click)="editField('nationality')">
                  <mat-icon class="fa fa-pencil-alt"></mat-icon>
                </button>
              </mat-form-field>
              
              <div class="mt-3">
                <mat-form-field appearance="outline" class="half-width">
                  <mat-label>Address Line 1</mat-label>
                  <input matInput type="text" required formControlName="address1" [readonly]="!isFieldEditable.address1">
                  <button mat-icon-button matSuffix (click)="editField('address1')">
                    <mat-icon class="fa fa-pencil-alt"></mat-icon>
                  </button>
                </mat-form-field>
              </div>
              
              
              
              
                <mat-form-field appearance="outline" class="half-width">
                  <mat-label>Address Line 2</mat-label>
                  <input  matInput type="text" formControlName="address2" [readonly]="!isFieldEditable.address2">
                  <button mat-icon-button matSuffix (click)="editField('address2')">
                    <mat-icon class="fa fa-pencil-alt"></mat-icon>
                  </button>
                </mat-form-field>

              <div class="mt-3 d-flex justify-content-between">
              
                <mat-form-field appearance="outline" class="half-width">
                  <mat-label>City</mat-label>
                  <input matInput type="text" required formControlName="city" [readonly]="!isFieldEditable.city">
                  <button mat-icon-button matSuffix (click)="editField('city')">
                    <mat-icon class="fa fa-pencil-alt"></mat-icon>
                  </button>
                </mat-form-field>
                &nbsp;&nbsp;
                <mat-form-field appearance="outline" class="half-width">
                  <mat-label>State</mat-label>
                  <input  matInput type="text" required formControlName="state" [readonly]="!isFieldEditable.state">
                  <button mat-icon-button matSuffix (click)="editField('state')">
                    <mat-icon class="fa fa-pencil-alt"></mat-icon>
                  </button>
                </mat-form-field>
              </div>
              
              <div class="mt-3 d-flex justify-content-between">
                <mat-form-field appearance="outline" class="half-width">
                  <mat-label>Pincode</mat-label>
                  <input  matInput type="number" required formControlName="pincode" [readonly]="!isFieldEditable.pincode">
                  <button mat-icon-button matSuffix (click)="editField('pincode')">
                    <mat-icon class="fa fa-pencil-alt"></mat-icon>
                  </button>
                </mat-form-field>&nbsp;&nbsp;
              
                <mat-form-field appearance="outline" class="half-width">
                  <mat-label>Country</mat-label>
                  <mat-select  required formControlName="country">
                    <mat-option  *ngFor="let country of countries" [value]="country">
                      {{ country }}
                    </mat-option>
                    <button mat-icon-button matSuffix (click)="editField('country')">
                      <mat-icon class="fa fa-pencil-alt"></mat-icon>
                    </button>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="mt-1 text-center">
                  <button class="btn btn-primary w-100" [disabled]="!form.valid" (click)="onSubmit()">Save and Update</button>
              </div>
            </form>
          </div>

          <!-- <div class="col-md-4">
            <h3 class="mb-3 text-center">Change password</h3>
            <form [formGroup]="form" (ngSubmit)="onSubmit()">
              <mat-form-field appearance="outline" class="mt-4">
                <mat-label>Current Password</mat-label>
                <input type="password" formControlName="password" matInput required
                  placeholder="Enter current password">
              </mat-form-field>
              <mat-form-field appearance="outline" class="mt-4">
                <mat-label>New Password</mat-label>
                <input type="password" formControlName="password" matInput required placeholder="Enter new password">
              </mat-form-field>
              <mat-form-field appearance="outline" class="mt-4">
                <mat-label>Confirm Password</mat-label>
                <input type="password" formControlName="password" matInput required
                  placeholder="Enter confirm password">
              </mat-form-field>
            </form>
          </div> -->
        </div>
      </div>
    </section>
  </div>
</app-layout>

<div class="modal" tabindex="-1" *ngIf="isModalVisible" style="display: block">
  <div class="modal-overlay" [ngClass]="{'dark-overlay': isDarkMode}"></div> <!-- Light/Dark overlay -->

  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button
          type="button"
          class="btn-close"
          (click)="onCancel()"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <p>Profile Updated successfully</p>
      </div>
      <div class="modal-footer">
        
        <button type="button" class="btn btn-primary" (click)="closeModal()">
ok        </button>
      </div>
    </div>
  </div>
</div>

<app-loader *ngIf="showLoader"></app-loader>